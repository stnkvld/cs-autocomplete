"use strict";!function(e){var t,o=document.querySelector(".autocomplete"),a=o.querySelector(".autocomplete__input"),l=document.getElementById("autocomplete__template-item"),n=document.getElementById("autocomplete__null-result"),c=o.querySelector(".autocomplete__list"),s=new XMLHttpRequest;s.open("GET","/list.json",!0),s.send(null),s.onreadystatechange=function(){4==this.readyState&&200==this.status&&i(s)};var i=function(e){try{var o;e?(o=JSON.parse(e.response),localStorage.setItem("_itemList",e.response)):o=JSON.parse(localStorage.getItem("_itemList")),c.innerHTML="";for(var s=function(e){var t=l.content.cloneNode(!0),n=t.querySelector(".autocomplete__label"),s=t.querySelector(".autocomplete__radio");s.id="ac-".concat(e),n.setAttribute("for",s.id),s.value=o[e],n.innerText=o[e],n.addEventListener("click",function(){a.value=s.value,a.dispatchEvent(new Event("input"))}),s.addEventListener("keyup",function(e){"Enter"===e.code&&(a.value=s.value,a.dispatchEvent(new Event("input")))}),s.addEventListener("focus",function(e){c.classList.add("autocomplete__list--show"),this.checked=!0}),s.addEventListener("blur",function(e){e.relatedTarget&&!e.relatedTarget.classList.contains("autocomplete__radio")&&c.classList.remove("autocomplete__list--show")}),c.appendChild(t)},i=0;i<o.length;++i)s(i);c.appendChild(n.content.cloneNode(!0)),t=c.querySelector(".autocomplete__list-item:last-child"),a.addEventListener("input",function(){var e=this.value;c.querySelectorAll(".autocomplete__radio").forEach(function(t){if(~t.value.toLowerCase().indexOf(e.toLowerCase())){var o=new RegExp(e,"i"),a=t.value.match(o)[0];t.parentNode.querySelector(".autocomplete__label").innerHTML=t.value.replace(o,"<b>".concat(a,"</b>")),t.parentNode.classList.remove("autocomplete__list-item--hide")}else t.parentNode.classList.add("autocomplete__list-item--hide")}),c.querySelector(".autocomplete__list-item:not(.autocomplete__list-item--hide):not(:last-child)")?t.classList.add("autocomplete__list-item--hide"):t.classList.remove("autocomplete__list-item--hide")}),a.addEventListener("focus",function(){var e=c.querySelector(".autocomplete__radio:checked");e&&(e.checked=!1)}),a.addEventListener("blur",function(e){e.relatedTarget&&!e.relatedTarget.classList.contains("autocomplete__radio")&&c.classList.remove("autocomplete__list--show")})}catch(t){e?console.error("Unknown response type: "+t.message):console.error("Local data was corrupted: "+t.message)}}}();